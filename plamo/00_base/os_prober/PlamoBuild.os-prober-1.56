#!/bin/sh
##############################################################
url='http://ftp.yz.yamagata-u.ac.jp/debian/pool/main/o/os-prober/os-prober_1.56_amd64.deb'
pkgbase=os_prober
vers=1.56
arch=x86_64
# arch=i586
build=P1
src=os-prober
OPT_CONFIG=''
DOCS='README TODO'
patchfiles=''
compress=txz
##############################################################

# os-proberはDebian方面で開発されているソフトウェアだけど、
# os-prober_1.49_amd64.debには
# http://ftp.de.debian.org/debian/pool/main/o/os-prober/os-prober_1.49.tar.gz
# のソースコードには含まれていないスクリプトが存在するので，debパッケージから生成してみる
# 元々，ごく簡単なバイナリ+シェルスクリプトの構成なので，ライブラリ的な依存関係はないだらう

src=os-prober_${vers}_amd64.deb

# build/build2 にdata.tar.gzに含まれているバイナリを展開する

P=`pwd`/work
mkdir -p build
cd build
ar x ../$src
mkdir -p build2
cd build2
tar xvf ../data.tar.gz

# build/build2に展開されたファイルを$P以下に展開する
rm -rf $P
mkdir -p $P
cp -av * $P

cd $P
mkdir -p usr/share/doc/os-prober-$vers
cp ../$0 usr/share/doc/os-prober-$vers

/sbin/makepkg ../$pkgbase-$vers-$arch-$build.$compress <<EOF
y
1
EOF

